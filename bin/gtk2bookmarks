#!/usr/bin/env ruby
require 'rubygems'
gem 'gtk2applib', '~> 4.2.0'
require 'gtk2applib/gtk2_app'

Gtk2App.init( {
        :name           => 'Ruby-Gnome Bookmarks',
        :tooltip        => 'Bookmarks',
        :FILE           => __FILE__,
        } )

require 'gtk2bookmarks/bookmarks'
Bookmarks.load_hits

include Configuration
bookmarks = Bookmarks.new(BOOKMARK_FILES)

require 'gtk2bookmarks/gtk2bookmarksapp'
Gtk2Bookmarks.dock_menu(bookmarks)
Gtk2App.prep_icon_popup_menu = proc { Gtk2Bookmarks.conditional_reload(bookmarks) }

about = {
	'authors'	=> ['carlosjhr64@gmail.com'],
	'website'	=> 'http://ruby-gnome-apps.blogspot.com/search/label/Bookmarks',
	'website-label'	=> 'Ruby-Gnome Bookmarks Blog',
	'license'	=> 'GPL',
	'copyright'	=> '2009-Dec-28',
	}
Gtk2App.main_window(about) do |window|
  Gtk2Bookmarks::App.new(window,bookmarks)
end

Bookmarks.dump_hits
Gtk2App.finalize
